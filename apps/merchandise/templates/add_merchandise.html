{% extends 'base.html' %}
{% load static %}
{% comment %} # test {% endcomment %}
{% block meta %}
<title>{{ title|default:"Add New Product" }} - Merchandise</title>
{% endblock meta %}

{% block content %}
{% include 'navbar.html' %}

<!-- Toast Messages -->
{% if messages %}
  {% for message in messages %}
    {% if message.tags == 'success' %}
      <script>
        document.addEventListener('DOMContentLoaded', function() {
          showToast('toast-success', '{{ message }}');
        });
      </script>
    {% endif %}
  {% endfor %}
{% endif %}

<body class="bg-gray-50 text-gray-800 mt-16">
  <div class="max-w-4xl mx-auto px-6 py-10">
    <!-- Header -->
    <div class="mb-8">
      <div class="flex items-center gap-4 mb-4">
        <a href="{% url 'merchandise:show_merchandise' %}" class="inline-flex items-center gap-2 text-gray-600 hover:text-gray-800">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
          </svg>
          Back to Merchandise
        </a>
      </div>
    </div>

    <!-- Form -->
    <form method="post" enctype="multipart/form-data" class="space-y-8">
      {% csrf_token %}
      
      <!-- Basic Product Information -->
      <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
        <div class="grid grid-row gap-2 text-center">
          <h1 class="text-2xl font-bold text-gray-900">Create New Merchandise</h1>
          <h2 class="text-m text-gray-500 mb-6">Launch new merchandise for your event</h2>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="md:col-span-2">
            <label for="{{ form.name.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">Product Name</label>
            <input type="text" name="{{ form.name.name }}" id="{{ form.name.id_for_label }}" 
                   value="{{ form.name.value|default:'' }}"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                   placeholder="Enter product name" required>
            {% if form.name.errors %}
              <div class="text-red-600 text-sm mt-1">{{ form.name.errors.0 }}</div>
            {% endif %}
          </div>
          
          <div class="md:col-span-2">
            <label for="{{ form.description.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">Description</label>
            <textarea name="{{ form.description.name }}" id="{{ form.description.id_for_label }}" rows="4"
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                      placeholder="Enter product description" required>{{ form.description.value|default:'' }}</textarea>
            {% if form.description.errors %}
              <div class="text-red-600 text-sm mt-1">{{ form.description.errors.0 }}</div>
            {% endif %}
          </div>
          
          <div>
            <label for="{{ form.category.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">Category</label>
            <select name="{{ form.category.name }}" id="{{ form.category.id_for_label }}" 
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
              <option value="">Select Category</option>
              {% for value, label in form.category.field.choices %}
                <option value="{{ value }}" {% if form.category.value == value %}selected{% endif %}>{{ label }}</option>
              {% endfor %}
            </select>
            {% if form.category.errors %}
              <div class="text-red-600 text-sm mt-1">{{ form.category.errors.0 }}</div>
            {% endif %}
          </div>
          
          <div>
            <label for="{{ form.price_coins.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">Price (Coins)</label>
            <input type="number" name="{{ form.price_coins.name }}" id="{{ form.price_coins.id_for_label }}" 
                   value="{{ form.price_coins.value|default:'' }}"
                   min="1" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                   placeholder="Enter price in coins" required>
            {% if form.price_coins.errors %}
              <div class="text-red-600 text-sm mt-1">{{ form.price_coins.errors.0 }}</div>
            {% endif %}
          </div>

          <div>
            <label for="{{ form.stock.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">Stock Quantity</label>
            <input type="number" name="{{ form.stock.name }}" id="{{ form.stock.id_for_label }}" 
                   value="{{ form.stock.value|default:'' }}"
                   min="0" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                   placeholder="Enter stock quantity" required>
            {% if form.stock.errors %}
              <div class="text-red-600 text-sm mt-1">{{ form.stock.errors.0 }}</div>
            {% endif %}
          </div>

          <div>
            <label for="{{ form.image_url.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">Image URL</label>
            <input type="url" name="{{ form.image_url.name }}" id="{{ form.image_url.id_for_label }}" 
                   value="{{ form.image_url.value|default:'' }}"
                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                   placeholder="Enter image URL" required>
            {% if form.image_url.errors %}
              <div class="text-red-600 text-sm mt-1">{{ form.image_url.errors.0 }}</div>
            {% endif %}
          </div>
        </div>
      </div>

      <!-- Form Actions -->
      <div class="flex items-center justify-end gap-4">
        <a href="{% url 'merchandise:show_merchandise' %}" class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50">
          Cancel
        </a>
        <button type="submit" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
          Save Product
        </button>
      </div>
    </form>
  </div>
</body>

{% include 'footer.html' %}
{% endblock %}